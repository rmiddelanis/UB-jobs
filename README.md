# Full-time Job Equivalent Loss due to Natural Disasters

This project quantifies the impact of natural disasters on time worked by computing **Job Equivalent Loss (JEL)** â€” the reduction in working hours lost annually due to natural hazards, expressed as full-time equivalent. It uses an [economic microsimulation model](https://doi.org/10.1596/1813-9450-11129) (Middelanis et al., 2025) to estimate annual average labor income losses across countries, income quintiles, and hazard types.

## Key Concepts

- **JEL (Job Equivalent Loss)**: Translates per-capita labor income losses into an equivalent number of jobs lost, using the employment-to-population ratio (EPR):
  `JEL = EPR * (di_lab / l) * N_q`
- **Adjusted JEL**: Accounts for cross-country differences in working hours by scaling to a 40-hour full-time equivalent:
  `JEL_adj = JEL * (annual_work_hrs / 47) / 40`

## Repository Structure

```
calculate_JEL.py        Main pipeline script (see below)
model_settings.yml      Configuration for the upstream microsimulation model
data/
  employment_pop_ratio.xlsx   Employment-to-population ratio by country
  work_hours.xlsx             Annual working hours by country
  model_data/                 Generated by the upstream model
lib/
  global-unbreakable-model/   Git submodule: core microsimulation model engine
output/                       Generated output
```

## Setup

Requires Python 3.11 with conda. The environment is defined in the submodule:

```bash
# Clone repository
git clone <repo-url>

#Initialize submodules
git submodule update --init --recursive

# Create and activate the conda environment
conda env create -f lib/global-unbreakable-model/environment.yml
conda activate global-socioeconomic-resilience
```

## Running

```bash
python calculate_JEL.py
```

The script will:
1. Check for model data in `data/model_data/` and run the upstream model if missing
2. Load simulation outputs and compute labor income loss (AAL) by country, hazard, and quintile
3. Calculate JEL and time-adjusted JEL for each country/hazard/quintile combination
4. Save results to `output/JEL.csv` and `output/JEL_params.csv`
5. Generate global choropleth maps saved to `output/`

## Outputs

| File | Description |
|------|-------------|
| `output/JEL.csv` | JEL results by country, income quintile, and hazard (including `all_hazards` and `total` aggregates) |
| `output/JEL_params.csv` | Intermediate parameters: EPR, population, baseline labor income, labor income loss |
| `output/jel_adj_map.png` | Global choropleth of adjusted JEL (absolute) |
| `output/jel_adj_pop_rel_map.png` | Global choropleth of adjusted JEL relative to population |

## References

Robin Middelanis, Bramka Arga Jafino, Ruth Hill, Minh Cong Nguyen, and Stephane Hallegatte (2025). *Global Socio-economic Resilience to Natural Disasters*. Policy Research Working Paper.
